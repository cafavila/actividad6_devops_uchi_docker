version: 2.1
jobs:
  build:
    docker:
      - image: cimg/node:17.8.0
    steps:
      - checkout
      - run:
          name: "Primera etapa - Instalacion" 
          command: | 
            echo "Se construye el contenedor"
            node --version
            cd app
            npm install
      - run:
          name: "Segunda etapa - Pruebas"
          command: |
            echo "Realizando pruebas"
            cd app
            npm start > nohup.log
            wget http://127.0.0.1:3000/test >> nohup.log
            npm stop
workflows:
  build_and_test:
    jobs:
      - build
